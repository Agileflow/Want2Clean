(function(scope){var Process=scope.Process||{},ifNum=function(val){var number=+val;if(isNaN(number)){return val}else{return number}},_decode=function(val){return decodeURIComponent(val.replace(/\+/g,"%20"))},_token=/\{(.+?)\}/g,_query=null,_cookies=null;Process.Page=function(ids){var index=ids.length;while(index--){Process.Element(document.getElementById(ids[index]))}};Process.Element=function(element){var process;if(!element){return}switch(element.getAttribute("data-process")){case"if":Process.If(element);break;case"replace":Process.Replace(element);break;default:Process.Fix(element);break}};Process.Replace=function(element){var parent=element.parentNode,text=document.createTextNode(Process.Get(element.getAttribute("data-replace")));parent.insertBefore(text,element);parent.removeChild(element)};Process.Fix=function(element){var attr,key,node,len=element.attributes.length,size=element.childNodes.length;while(len--){attr=element.attributes[len];if(attr.name.substring(0,13)=="data-replace-"){key=attr.name.substring(13);element.setAttribute(key,Process.Get(attr.value));element.removeAttribute(attr.name)}}while(size--){node=element.childNodes[size];if(node.nodeType===3&&node.data&&node.data.indexOf("{")>=0){node.data=Process.Get(node.data)}}};Process.If=function(element){var attr,children,i,len,parent=element.parentNode,index=element.attributes.length,visible=undefined;while(index--){attr=element.attributes[index];switch(attr.name){case"field":visible=Process.Check(element,Process.Get(attr.value));break;case"nofield":visible=!Process.Check(element,Process.Get(attr.value));break}if(visible!==undefined){break}}if(visible){children=element.childNodes;i=0;len=children.length;for(;i<len;i++){parent.insertBefore(children[0],element)}}parent.removeChild(element)};Process.Check=function(element,val1){var attr,val2,index=element.attributes.length;while(index--){attr=element.attributes[index];switch(attr.name){case"equals":return val1==Process.Get(attr.value);case"gt":case"greaterthan":case"morethan":return ifNum(val1)>ifNum(Process.Get(attr.value));case"gte":return ifNum(val1)>=ifNum(Process.Get(attr.value));case"lt":case"lessthan":case"lesserthan":return ifNum(val1)<ifNum(Process.Get(attr.value));case"lte":return ifNum(val1)<=ifNum(Process.Get(attr.value));case"ne":case"notequals":return val1!=Process.Get(attr.value);case"contains":val2=Process.Get(attr.value);return val1.indexOf(val2>=0);case"notcontains":val2=Process.Get(attr.value);return !val1.indexOf(val2>=0);case"in":val2=Process.Get(attr.value);return Process.InArray(val1,(""+val2).split(","));case"notin":val2=Process.Get(attr.value);return !Process.InArray(val1,(""+val2).split(","));case"between":val2=Process.Get(attr.value).Split(",");if(val2.length==2&&ifNum(val1)>=ifNum(val2[0])&&ifNum(val1)<=ifNum(val2[1])){return true}else{return false}}}return !!val1};Process.InArray=function(val,array){var index=array.length;while(index--){if(values[index]==val){return true}}return false};Process.Get=function(field){var value=field.replace(_token,function(m,m1){var parts=m1.split("/"),token=parts.shift();return Process.Data(token.split(":"),0)||_decode(parts.shift()||"")});return value};Process.Data=function(data,index){switch(data[index].toLowerCase()){case"f":return Process.Format(data[index+1],data,index+2);case"if":return Process.Data(data,index+1)?data.pop():"";case"ifno":case"ifnot":return Process.Data(data,index+1)?"":data.pop();case"q":case"querystring":return Process.Query(data[index+1])||"";case"session":case"cookie":return Process.Cookie(data[index+1])||"";default:return""}};Process.Format=function(type,data,index){if(!type||index>data.length-1){return""}var digits=null;var pattern=null;var d;type=type.toLowerCase();var pos=0;if(type=="binary"){pos=2}else{if(index+1<data.length){switch(type){case"p":case"phone":case"p2":case"phone2":if(data[index].indexOf("0")>=0){pattern=data[index];pos=1}break;default:d=parseInt(data[index]);if(!isNaN(d)){digits=d;pos=1}break}}}var value=Process.Data(data,index+pos);switch(type){case"p":case"phone":return Process.Phone(""+value,pattern);case"p2":case"phone2":return Process.Phone(""+value,pattern||"000.000.0000");case"tel":return Process.Phone(""+value,pattern||"0000000000")}};Process.Phone=function(number,pattern){if(!number){return""}var digits=number.replace(/\D+/g,"");if(digits.length<10){return number}var sb=(pattern||"(000) 000-0000").split("");var count=0;for(var i=0;i<sb.length;i++){if(sb[i]=="0"){if(count<digits.length){sb[i]=digits[count++]}else{sb.splice(i,1);i--}}}if(count==10&&digits.length>10){sb.push(" x"+digits.substring(10))}return sb.join("")};Process.Query=function(key){var array,i,parts,name,value;if(!_query){_query={};array=window.location.search?window.location.search.substring(1).split("&"):[];i=array.length;while(i--){parts=array[i].split("=");name=_decode(parts.shift()).toLowerCase();if(parts.length){_query[name]=_decode(parts.join("="))}else{_query[name]=null}}}return _query[key.toLowerCase()]};Process.Cookie=function(key){var array,i,parts,name,value;if(!_cookies){_cookies={};array=document.cookie?document.cookie.split("; "):[];i=array.length;while(i--){parts=array[i].split("=");name=_decode(parts.shift()).toLowerCase();value=parts.join("=");switch(value[0]){case"#":_cookies[name]=+value.substring(1);break;case":":_cookies[name]=new Date(+value.substring(1));break;case"!":_cookies[name]=value==="!!";break;case"'":_cookies[name]=_decode(value.substring(1));break}}}array=key.split("|");i=0;for(;i<array.length;i++){value=_cookies[array[i].toLowerCase()];if(value){return value}}return""};scope.Process=Process;if(document.documentElement&&(document.documentElement.clientWidth<=1280||(Process.Cookie("pref")&1)===1)){document.documentElement.className+=" minimize"}})(this);